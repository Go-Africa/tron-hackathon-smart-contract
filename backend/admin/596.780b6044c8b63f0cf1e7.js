(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[596],{9596:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AuthModule:()=>A});var r=i(8583),o=i(9215),s=i(665),n=i(8259),a=i.n(n),u=i(7716),c=i(834),l=i(9344),m=i(5883);function d(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1,"Email requis"),u.qZA())}function g(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1,"Email non valide"),u.qZA())}function h(t,e){if(1&t&&(u.TgZ(0,"div",36),u.YNc(1,d,2,0,"div",37),u.YNc(2,g,2,0,"div",37),u.qZA()),2&t){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.f.username.errors.required),u.xp6(1),u.Q6J("ngIf",t.f.username.errors.username)}}function Z(t,e){1&t&&(u.TgZ(0,"div"),u._uU(1,"Mot de passe requis"),u.qZA())}function f(t,e){if(1&t&&(u.TgZ(0,"div",36),u.YNc(1,Z,2,0,"div",37),u.qZA()),2&t){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.f.password.errors.required)}}function p(t,e){1&t&&(u.TgZ(0,"button",38),u._uU(1,"Sign in"),u.qZA())}function v(t,e){1&t&&(u.TgZ(0,"p",28),u._UZ(1,"ngx-loading-spinner",39),u.qZA())}const b=function(t){return{"is-invalid":t}},q=[{path:"login",component:(()=>{class t{constructor(t,e,i,r,o){this.formBuilder=t,this.route=e,this.router=i,this.authenticationService=r,this.toast=o,this.submitted=!1,this.error="",this.year=(new Date).getFullYear()}ngOnInit(){document.body.removeAttribute("data-layout"),document.body.classList.add("auth-body-bg"),this.loginForm=this.formBuilder.group({username:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}get f(){return this.loginForm.controls}showToast(t,e,i,r){a().fire({title:t,text:e,icon:i,timer:r})}onSubmit(){if(this.submitted=!0,console.log("Login",this.loginForm.value),this.loginForm.invalid)this.showToast("Warning","Please fill all the fields !","warning",1e3),this.submitted=!1;else{let t=this.loginForm.value;this.authenticationService.login(t.username,t.password).subscribe(e=>{const i=e.headers.get("authorization");this.authenticationService.saveToken(i)?this.authenticationService.getCurrentUserForremote(t.username).subscribe(t=>{t.active?(localStorage.setItem("currentUser",JSON.stringify({name:t.name,email:t.email,profilePicture:t.profilePicture,tel:t.tel})),this.showToast("Success","Successfull connected","success",1e3),this.toast.info("redirection...","Please wait..."),location.href=this.route.snapshot.queryParams.returnUrl?this.route.snapshot.queryParams.returnUrl:"/"):(this.submitted=!1,localStorage.removeItem("token"),this.showToast("Warning","Your account is not yet activated ! Please check your email inbox and follow the link","warning",1e3))},t=>{localStorage.clear(),0===t.status?(this.submitted=!1,this.showToast("Error","Connexion Problem, Please retry","error",1e3)):(this.showToast("Error","An error has occured","error",1e3),this.submitted=!1)}):(this.submitted=!1,this.showToast("Warning","You are not an administrator !","warning",1500))},t=>{0===t.status?(this.submitted=!1,localStorage.clear(),this.showToast("Error","Connexion Problem, Please retry","error",1e3)):401==t.status||403==t.status?(this.showToast("Warning","Incorrect email or password !","warning",1e3),this.submitted=!1):(this.showToast("Error","An error has occured !","error",1e3),this.submitted=!1)})}}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(s.qu),u.Y36(o.gz),u.Y36(o.F0),u.Y36(c.e),u.Y36(l._W))},t.\u0275cmp=u.Xpm({type:t,selectors:[["ng-component"]],decls:49,vars:12,consts:[[1,"home-btn","d-none","d-sm-block"],["routerLink",""],[1,"mdi","mdi-home-variant","h2","text-white"],[1,"container-fluid","p-0"],[1,"row","no-gutters"],[1,"col-lg-4"],[1,"authentication-page-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],["routerLink","",1,"logo"],["src","assets/images/logo1.png","height","50","alt","logo"],[1,"font-size-18","mt-4"],[1,"text-muted"],[1,"p-2","mt-5"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","auth-form-group-custom","mb-4"],[1,"ri-user-2-line","auti-custom-input-icon"],["for","name"],["type","email","formControlName","username","id","name","placeholder","Email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"ri-lock-2-line","auti-custom-input-icon"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Password",1,"form-control",3,"ngClass"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","customControlInline",1,"custom-control-input"],["for","customControlInline",1,"custom-control-label"],[1,"mt-4","text-center"],["class","btn btn-success w-md waves-effect waves-light","type","submit",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[1,"mt-5","text-center"],[1,"mdi","mdi-heart","text-danger"],[1,"col-lg-8"],[1,"authentication-bg"],[1,"bg-overlay"],[1,"invalid-feedback"],[4,"ngIf"],["type","submit",1,"btn","btn-success","w-md","waves-effect","waves-light"],["mini",""]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"a",1),u._UZ(2,"i",2),u.qZA(),u.qZA(),u.TgZ(3,"div"),u.TgZ(4,"div",3),u.TgZ(5,"div",4),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"div",7),u.TgZ(9,"div",8),u.TgZ(10,"div",9),u.TgZ(11,"div"),u.TgZ(12,"div",10),u.TgZ(13,"div"),u.TgZ(14,"a",11),u._UZ(15,"img",12),u.qZA(),u.qZA(),u.TgZ(16,"h4",13),u._uU(17,"Welcome!"),u.qZA(),u.TgZ(18,"p",14),u._uU(19,"Please Login."),u.qZA(),u.qZA(),u.TgZ(20,"div",15),u.TgZ(21,"form",16),u.NdJ("ngSubmit",function(){return e.onSubmit()}),u.TgZ(22,"div",17),u._UZ(23,"i",18),u.TgZ(24,"label",19),u._uU(25,"Email Address"),u.qZA(),u._UZ(26,"input",20),u.YNc(27,h,3,2,"div",21),u.qZA(),u.TgZ(28,"div",17),u._UZ(29,"i",22),u.TgZ(30,"label",23),u._uU(31,"Password"),u.qZA(),u._UZ(32,"input",24),u.YNc(33,f,2,1,"div",21),u.qZA(),u.TgZ(34,"div",25),u._UZ(35,"input",26),u.TgZ(36,"label",27),u._uU(37," Remember me "),u.qZA(),u.qZA(),u.TgZ(38,"div",28),u.YNc(39,p,2,0,"button",29),u.qZA(),u.YNc(40,v,2,0,"p",30),u.qZA(),u.qZA(),u.TgZ(41,"div",31),u.TgZ(42,"p"),u._uU(43),u._UZ(44,"i",32),u._uU(45," by Go Africa Dev Team"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(46,"div",33),u.TgZ(47,"div",34),u._UZ(48,"div",35),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(21),u.Q6J("formGroup",e.loginForm),u.xp6(5),u.Q6J("ngClass",u.VKq(8,b,e.submitted&&e.f.username.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.username.errors),u.xp6(5),u.Q6J("ngClass",u.VKq(10,b,e.submitted&&e.f.password.errors)),u.xp6(1),u.Q6J("ngIf",e.submitted&&e.f.password.errors),u.xp6(6),u.Q6J("ngIf",!e.submitted),u.xp6(1),u.Q6J("ngIf",e.submitted),u.xp6(3),u.hij("\xa9 ",e.year," Go Africa. Built with "))},directives:[o.yS,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,r.mk,r.O5,m.SJ],styles:[""]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[o.Bz.forChild(q)],o.Bz]}),t})();var w=i(8575);let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.ez,T,w.m]]}),t})()}}]);